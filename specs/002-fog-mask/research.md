# research.md

## 需釐清事項與研究任務

1. 狀態管理是否採用 Zustand？還是僅用 React Context？
2. 單元測試標準與覆蓋率要求？Jest 是否唯一選擇？
3. 本地儲存採用 AsyncStorage 還是 SecureStore？是否需支援雲端同步？
4. iOS 是否需完整支援？還是僅 Android？
5. 地圖互動效能目標（fps、遮罩更新延遲、地圖載入時間）具體數值？
6. 用戶數/資料量上限？

## 依據技術選型與整合研究

- Google Maps API 在 React Native（Expo）最佳整合方案
- 迷霧遮罩演算法（即時遮罩、區塊擦除、效能優化）
- 狀態管理（Zustand vs Context API）在地圖互動場景的效能比較
- 本地儲存與同步策略（資料結構、同步頻率、資料一致性）
- 單元測試與 E2E 測試工具選型（Jest、Testing Library、Detox）
- Android 深色模式與字體規範最佳實踐

---

## 研究紀錄格式

## 研究決策紀錄

### 1. 狀態管理方案
決策：採用 Zustand 作為主要狀態管理，簡單場景可用 React Context。
理由：Zustand 輕量、效能佳，適合地圖互動與遮罩狀態，Context 適合全域簡單狀態。
替代方案：僅用 Context（維護複雜度高）、Redux（過重）。

### 2. 單元測試與覆蓋率
決策：Jest 為單元測試主力，覆蓋率目標 80% 以上。
理由：Jest 為 React Native 標配，社群資源豐富，易於 CI 整合。
替代方案：Testing Library（輔助 UI 測試）、Detox（E2E，非必須）。

### 3. 本地儲存與同步
決策：採用 AsyncStorage，暫不強制雲端同步。
理由：AsyncStorage 易於整合 React Native，資料量小時效能足夠，雲端同步可後續擴充。
替代方案：SecureStore（需敏感資料時）、雲端同步（如 Firebase，後續評估）。

### 4. iOS 支援範圍
決策：以 Android 為主，iOS 保持基本相容（不影響主流程即可）。
理由：專案主力為 Android，iOS 僅需確保不閃退、主功能可用。
替代方案：完整 iOS 最佳化（需額外人力）。

### 5. 地圖互動效能目標
決策：地圖互動 60fps，迷霧遮罩即時更新 <100ms，地圖載入 <2s。
理由：60fps 為流暢互動標準，100ms 內遮罩更新不影響體驗，2s 內地圖載入屬可接受。
替代方案：更高效能（需原生優化）、較低標準（體驗下降）。

### 6. 用戶數/資料量上限
決策：單一用戶地圖資料量預設 10MB 內，支援 1,000+ 活躍用戶。
理由：10MB 足以儲存遮罩與軌跡，1,000+ 用戶屬 MVP 合理規模。
替代方案：更大規模（需後端同步與分流設計）。
