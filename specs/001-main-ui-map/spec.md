
# Feature Specification: 主地圖介面仿世界迷霧

**Feature Branch**: `001-main-ui-map`  
**Created**: 2026-02-13  
**Status**: Draft  
**Input**: User description: "主地圖介面仿世界迷霧，Expo Go 全螢幕地圖、迷霧遮罩、圓形藍點、底部狀態欄、紅色開始探索按鈕、橫向工具列、深色模式、繁體中文、TypeScript+Tailwind、適配 Android 尺寸"



## User Scenarios & Testing *(mandatory)*

### User Story 1 - 探索地圖主頁 (Priority: P1)

作為一位用戶，當我打開 APP 時，應立即看到全螢幕地圖，中央有藍色圓點代表我的位置，地圖上有迷霧遮罩，僅顯示我已探索的區域。

**Why this priority**: 這是產品的核心體驗，直接影響用戶的第一印象與主要功能。

**Independent Test**: 啟動 APP，確認地圖、藍點、迷霧遮罩正確顯示，且能隨位置移動更新。

**Acceptance Scenarios**:

1. **Given** APP 啟動，**When** 進入主頁，**Then** 顯示全螢幕地圖、藍點、迷霧遮罩。
2. **Given** 用戶移動，**When** 位置變化，**Then** 藍點與透明區域隨之移動。

---

### User Story 2 - 狀態欄與探索按鈕 (Priority: P2)

作為一位用戶，我希望在地圖下方看到圓角狀態欄，顯示等級、探索比例、今日與累積里程，並有紅色「開始探索」按鈕可切換探索狀態。

**Why this priority**: 狀態欄與探索按鈕是互動入口，影響用戶參與度與功能啟動。

**Independent Test**: 進入主頁，檢查狀態欄資訊與紅色按鈕，點擊可切換「開始/停止探索」狀態。

**Acceptance Scenarios**:

1. **Given** 進入主頁，**When** 查看底部，**Then** 顯示正確資訊與紅色按鈕。
2. **Given** 按下紅色按鈕，**When** 切換探索，**Then** 狀態與按鈕文字正確變化。

---

### User Story 3 - 工具列與深色模式 (Priority: P3)

作為一位用戶，我希望在狀態欄下方有橫向捲動工具列，包含四個圖示按鈕，且整體介面為深色模式、繁體中文，適配各種 Android 裝置。

**Why this priority**: 工具列提供主要導航，深色模式與本地化提升易用性與一致性。

**Independent Test**: 檢查工具列四個按鈕、深色主題、繁體中文顯示，於不同尺寸裝置皆正常。

**Acceptance Scenarios**:

1. **Given** 進入主頁，**When** 查看工具列，**Then** 有四個圖示按鈕且可操作。
2. **Given** 切換不同 Android 裝置，**When** 檢查介面，**Then** 介面不被遮蔽且自適應。

---

### Edge Cases

- 用戶未授權定位權限時，地圖與藍點如何顯示？
- 地圖資料載入失敗時，介面如何提示？
- 裝置螢幕極小或極大時，狀態欄與工具列是否仍可完整顯示？






## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統必須在 APP 啟動時顯示全螢幕地圖，中央有藍色圓點代表用戶位置。
- **FR-002**: 地圖上方需有半透明深灰色迷霧遮罩，僅中央圓形區域為透明。
- **FR-003**: 地圖底部需有圓角狀態欄，顯示等級、探索比例、今日與累積里程。
- **FR-004**: 狀態欄中間有紅色「開始探索」按鈕，按下可切換探索/停止。
- **FR-005**: 狀態欄下方有橫向捲動工具列，含四個圖示按鈕：探索地圖、個人統計數據、GPX 軌跡、設定。
- **FR-006**: 介面整體採用深色模式，所有文字與數字皆以繁體中文顯示。
- **FR-007**: 介面需適配各種 Android 裝置尺寸，確保地圖與狀態欄不被遮蔽。
- **FR-008**: 迷霧遮罩必須以 Canvas 技術實現，確保效能佳且彈性高，並處理跨平台相容性。

### Key Entities

- **地圖**：顯示用戶位置、迷霧遮罩、探索區域。
- **用戶狀態**：等級、探索比例、今日/累積里程、探索狀態。
- **工具列項目**：四個主要功能按鈕。


## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 90% 以上用戶可於 3 秒內看到地圖與藍點正確顯示。
- **SC-002**: 95% 以上用戶可正確切換探索狀態，且資訊即時更新。
- **SC-003**: 介面於 99% 主流 Android 裝置上無遮蔽、無顯示異常。
- **SC-004**: 用戶滿意度調查中，80% 以上認為主頁操作直覺、資訊清楚。

### Assumptions

- 預設用戶已授權定位權限。
- 地圖服務可正常載入。
- 迷霧遮罩預設以效能最佳、相容性高的方式實現。
